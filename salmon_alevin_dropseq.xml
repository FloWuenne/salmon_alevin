<tool id="salmon_alevin" name="Salmon Alevin" version="0.1.0">
	<description>Salmon alevin enables gene quantification for single-cell RNA-seq using quasi mapping.</description>
	<requirements>
		<requirement type="package" version="0.11.2">salmon</requirement>
	</requirements>

	 <command><![CDATA[

	## Create output directory for salmon alevin
	mkdir ./alevin_output 

	## Run salmon alevin
	salmon alevin 
	-lISR
	-1 $input_fastq1
	-2 $input_fastq2
	--$sc_datatype
	-i $ref_transcriptome 
	-p 1
	-o ./alevin_output


	]]>
	</command>

	<inputs>
		<param type="data" name="input_fastq1" format="gz" />
		<param type="data" name="input_fastq2" format="gz" />
	
		<param name="ref_transcriptome" label="Reference Organism" type="select" multiple="false" format="text" help="Choose a reference transcriptome!">
			<option value="v29_index">Homo sapiens</option>
			<option value="vM20_index">Mus musculus</option>
		</param> 

		<param name="sc_datatype" label="scRNA-seq datatype" type="select" multiple="false" format="text" help="Choose the single-cell platform used to create your data!">
			<option value ="chromium">10x Genomics 3'RNA-seq v2</option>
			<option value ="chromiumV3">10x Genomics 3'RNA-seq v3</option>
			<option value ="dropseq">Drop-seq</option>
		</param>

	</inputs>
	<outputs>
		<data name="output1" format="data" />
	</outputs>

	<help><![CDATA[
        Version Info: This is the most recent version of salmon.

alevin
==========
salmon-based processing of single-cell RNA-seq data.

alevin options:


mapping input options:
  -l [ --libType ] arg                  Format string describing the library 
                                        type
  -i [ --index ] arg                    salmon index
  -r [ --unmatedReads ] arg             List of files containing unmated reads 
                                        of (e.g. single-end reads)
  -1 [ --mates1 ] arg                   File containing the #1 mates
  -2 [ --mates2 ] arg                   File containing the #2 mates


alevin-specific Options:
  -v [ --version ]                      print version string
  -h [ --help ]                         produce help message
  -o [ --output ] arg                   Output quantification directory.
  -p [ --threads ] arg (=2)             The number of threads to use 
                                        concurrently.
  --tgMap arg                           transcript to gene map tsv file
  --dropseq                             Use DropSeq Single Cell protocol for 
                                        the library
  --chromiumV3                          Use 10x chromium v3 Single Cell 
                                        protocol for the library.
  --chromium                            Use 10x chromium v2 Single Cell 
                                        protocol for the library.
  --gemcode                             Use 10x gemcode v1 Single Cell protocol
                                        for the library.
  --celseq                              Use CEL-Seq Single Cell protocol for 
                                        the library.
  --celseq2                             Use CEL-Seq2 Single Cell protocol for 
                                        the library.
  --whitelist arg                       File containing white-list barcodes
  --noQuant                             Don't run downstream barcode-salmon 
                                        model.
  --numCellBootstraps arg (=0)          Generate mean and variance for cell x 
                                        gene matrix quantification estimates.
  --forceCells arg (=0)                 Explicitly specify the number of cells.
  --expectCells arg (=0)                define a close upper bound on expected 
                                        number of cells
  --mrna arg                            path to a file containing mito-RNA 
                                        gene, one per line
  --rrna arg                            path to a file containing ribosomal 
                                        RNA, one per line
  --useCorrelation                      Use pair-wise pearson correlation with 
                                        True barcodes as a feature for 
                                        white-list creation.
  --dumpfq                              Dump barcode modified fastq file for 
                                        downstream analysis by using coin toss 
                                        for multi-mapping.
  --dumpBfh                             dump the big hash with all the barcodes
                                        and the UMI sequence.
  --dumpUmiGraph                        dump the per cell level Umi Graph.
  --dumpFeatures                        Dump features for whitelist and 
                                        downstream analysis.
  --dumpCsvCounts                       Dump cell v transcripts count matrix in
                                        csv format.
  --lowRegionMinNumBarcodes arg (=200)  Minimum Number of CB to use for 
                                        learning Low confidence region 
                                        (Default: 200).
  --maxNumBarcodes arg (=100000)        Maximum allowable limit to process the 
                                        cell barcodes. (Default: 100000)


    ]]></help>
    <citations>
        <citation type="bibtex">
@misc{renameTODO,
  author = {LastTODO, FirstTODO},
  year = {TODO},
  title = {TODO},
  url = {https://salmon.readthedocs.io/en/latest/alevin.html#},
}</citation>
    </citations>
</tool>
